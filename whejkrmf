filebeat.inputs:
  - type: filestream
    id: app-logs
    enabled: true
    paths:
      - "C:/path/to/logs/*.log"    # <-- change this

    processors:
      # 1. Parse your pipe-delimited log format
      - dissect:
          tokenizer: "%{date}|%{time}|%{thread}|%{thread_name}|%{level}|%{source}|%{message}"
          field: "message"
          target_prefix: ""

      # 2. Create proper timestamp field for Grafana
      - script:
          lang: painless
          source: >
            ctx.log_timestamp = ctx.date + "T" + ctx.time;

      - date:
          field: log_timestamp
          target_field: "@timestamp"
          formats:
            - "yyyy-MM-dd'T'HH:mm:ss.SSS"

      # 3. Clean up if needed
      - drop_fields:
          fields: ["log", "ecs"]

output.elasticsearch:
  hosts: ["http://localhost:9200"]   # <-- change if needed
  username: "elastic"                # <-- your username
  password: "yourpassword"           # <-- your password

setup.template.settings:
  index.number_of_shards: 1

setup.ilm.enabled: false